<br />

<div class="alert alert-info">
    We are glad that youâ€™ve decided to take our Enneagram Assessment and are happy to inform you that you are on the right path towards Self-Discovery. 
    
    Please provide us with the details mentioned below to begin the process. 
    
    Do note, the information provided by you is strictly confidential and will be used solely for academic and research purposes.
  </div>
<br/>

<div *ngIf="DaysPassedLog">
    <div class="alert alert-danger">
        {{DaysPassedLog}}
    </div>
    
    <br/>
</div>

<mat-tab-group mat-stretch-tabs class="example-stretched-tabs mat-elevation-z4">
    <mat-tab label="Registration">
        <div class="card">
            <div class="card-body">
                <form class="example-form" [formGroup]="candidateregisterForm" (ngSubmit)="onSubmit()">
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <mat-form-field class="example-full-width" [ngClass]="{ 'is-invalid': submitted && f.Gender.errors }">
                                <mat-label>Gender</mat-label>
                                <mat-select placeholder="Gender"
                                            required
                                            formControlName="Gender" 
                                            [(ngModel)]="UserModel.UserGender"
                                            (selectionChange)="onChangeGender(UserModel.UserGender)">
                                    <mat-option>Select Gender</mat-option>
                                    <mat-option *ngFor="let gender of Gender" [value]="gender.GenderId">
                                        {{gender.GenderName}}
                                    </mat-option>
                                </mat-select>
                               
                                <mat-error *ngIf="f.Gender.errors !== null && f.Gender.errors.required">
                                    Please select gender
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="form-group col-md-6" [hidden]="UserModel.UserGender==3?false:true" >
                            <mat-form-field class="example-full-width" >
                                <mat-label>Other Gender</mat-label>
                                <input  matInput required  placeholder="Other Gender"
                                        formControlName="GenderTxt" 
                                        [(ngModel)]="UserModel.GenderTxt">
                                <mat-error *ngIf="f.GenderTxt.errors !== null && f.GenderTxt.errors.validGendertxt">
                                     Please enter other gender
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <mat-form-field class="example-full-width" [ngClass]="{ 'is-invalid': submitted && f.Age.errors }">
                                <mat-label>Age</mat-label>
                                <mat-select placeholder="Age"
                                            required
                                            formControlName="Age" 
                                            [(ngModel)]="UserModel.UserAge">
                                    <mat-option>Select Age</mat-option>
                                    <mat-option *ngFor="let age of Age" [value]="age.AgeId">
                                        {{age.AgeName}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="f.Age.errors !== null && f.Age.errors.required">
                                    Please select age
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="form-group col-md-6">
                            <mat-form-field class="example-full-width" [ngClass]="{ 'is-invalid': submitted && f.MaritalStatus.errors }">
                                <mat-label>Marital Status</mat-label>
                                <mat-select placeholder="Marital Status"
                                            required
                                            formControlName="MaritalStatus" 
                                            [(ngModel)]="UserModel.MaritalStatus">
                                    <mat-option>Select Marital Status</mat-option>
                                    <mat-option *ngFor="let marital of MaritalStatus" [value]="marital.MaritalId">
                                        {{marital.MaritalName}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="f.MaritalStatus.errors !== null && f.MaritalStatus.errors.required">
                                    Please select marital status
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <mat-form-field class="example-full-width" [ngClass]="{ 'is-invalid': submitted && f.Country.errors }">
                                <mat-label>Country</mat-label>
                                <mat-select placeholder="Country"
                                            required
                                            formControlName="Country" 
                                            (selectionChange)="onChangeCountry(UserModel.Country)"
                                            [(ngModel)]="UserModel.Country">
                                    <mat-option>Select Country</mat-option>
                                    <mat-option *ngFor="let Co of countries" [value]="Co.countryId">
                                        {{Co.countryname}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="f.Country.errors !== null && f.Country.errors.required">
                                    Please select country
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="form-group col-md-6" [hidden]="UserModel.Country==1?false:true">
                            <mat-form-field class="example-full-width" [ngClass]="{ 'is-invalid': submitted && f.State.errors }">
                                <mat-label>State</mat-label>
                                <mat-select placeholder="State"
                                            required
                                            formControlName="State"
                                            [(ngModel)]="UserModel.State">
                                    <mat-option>Select State</mat-option>
                                    <mat-option *ngFor="let state of states" [value]="state.stateId">
                                        {{state.statename}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="f.State.errors !== null && f.State.errors.validstate">
                                    Please select State
                               </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <mat-form-field class="example-full-width" [ngClass]="{ 'is-invalid': submitted && f.Qualification.errors }">
                                <mat-label>Qualification</mat-label>
                                <mat-select placeholder="Qualification"
                                            required
                                            formControlName="Qualification" 
                                            [(ngModel)]="UserModel.Qualification">
                                    <mat-option>Select Qualification</mat-option>
                                    <mat-option *ngFor="let qualification of Qualification" [value]="qualification.QualificationId">
                                        {{qualification.QualificationName}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="f.Qualification.errors !== null && f.Qualification.errors.required">
                                    Please select qualification
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="form-group col-md-6" [hidden]="UserModel.Qualification==8?false:true" >
                            <mat-form-field class="example-full-width" >
                                <mat-label>Other Qualification</mat-label>
                                <input  matInput required  placeholder="Other Qualification"
                                        formControlName="QualificationTxt" 
                                        [(ngModel)]="UserModel.QualificationTxt">
                                <mat-error *ngIf="f.QualificationTxt.errors !== null && f.QualificationTxt.errors.validQualificationtxt">
                                     Please enter other qualification
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <mat-form-field class="example-full-width" [ngClass]="{ 'is-invalid': submitted && f.EmployeeStatus.errors }">
                                <mat-label>EmployeeStatus</mat-label>
                                <mat-select placeholder="Employee Status"
                                            required
                                            formControlName="EmployeeStatus" 
                                            [(ngModel)]="UserModel.EmployeeStatus">
                                    <mat-option>Select Employee Status</mat-option>
                                    <mat-option *ngFor="let employeeStatus of EmployeeStatus" [value]="employeeStatus.EmploymentId">
                                        {{employeeStatus.EmploymentName}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="f.EmployeeStatus.errors !== null && f.EmployeeStatus.errors.required">
                                    Please select employee status
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <mat-form-field class="example-full-width" [ngClass]="{ 'is-invalid': submitted && f.Industry.errors }">
                                <mat-select (openedChange)="openedChange($event)" 
                                            placeholder="Current Industry" 
                                            required
                                            formControlName="Industry" 
                                            [(ngModel)]="UserModel.Industry"
                                            multiple>
                                    <mat-select-trigger>
                                            {{GetFirstpostionValue(this.candidateregisterForm.get('Industry').value)}}
                                        <span *ngIf="GetLengthIndustry(this.candidateregisterForm.get('Industry').value)" class="additional-selection">
                                            (+{{CountIndustryValue(this.candidateregisterForm.get('Industry').value)}})
                                        </span>
                                    </mat-select-trigger>
                                    <div class="select-container">
                                        <mat-optgroup >
                                            <mat-form-field style="width:100%;">
                                              <input #search autocomplete="off" 
                                                     placeholder="Search" 
                                                     aria-label="Search" 
                                                     matInput 
                                                     [formControl]="searchTextboxControl">
                                              <button [disableRipple]="true" 
                                                      *ngIf="search.value" 
                                                      matSuffix mat-icon-button 
                                                      aria-label="Clear" 
                                                      (click)="clearSearch($event)">
                                              <mat-icon >close</mat-icon>
                                                </button>
                                            </mat-form-field>
                                        </mat-optgroup>
                                        <mat-optgroup *ngIf="FilterIndustryCount(filteredOptions | async)">
                                            <div>No results found!</div>
                                        </mat-optgroup>
                                        <mat-option (onSelectionChange)="selectionChange($event)" 
                                                    *ngFor="let Industry  of filteredOptions | async" 
                                                    [value]="Industry ">
                                                {{Industry}}
                                        </mat-option>
                                    </div>
                                </mat-select>
                                <mat-error *ngIf="f.Industry.errors !== null && f.Industry.errors.required">
                                    Please select Industry
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="form-row">
						<div *ngIf="candidateregisterForm.invalid;then FormValidation else loading_content"></div>
                        <ng-template #FormValidation>
                            <div class="form-group col-md-12">
                                <button mat-button type="submit" class="mat-raised-button mat-primary"
                                    [class.spinner]="loading" [disabled]="candidateregisterForm.invalid" style="width: 100%;">Start Assessment</button>
                            </div>
                        </ng-template>
                        <ng-template #loading_content>
                            <div class="form-group col-md-12">
                                <button mat-button type="submit" class="mat-raised-button mat-primary"
                                    [class.spinner]="loading" [disabled]="loading" style="width: 100%;">Start Assessment</button>
                            </div>
						</ng-template>
                    </div>
                </form>
            </div>
        </div>
    </mat-tab>
</mat-tab-group>